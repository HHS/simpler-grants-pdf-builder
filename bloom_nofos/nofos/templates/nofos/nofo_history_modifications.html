{% extends "base.html" %}
{% load static nofo_name tz %}

{% block title %}
  Modification history for “{{ nofo|nofo_name }}”
{% endblock %}

{% block content %}
  {% with nofo|nofo_name as nofo_name_str %}
    {% with "Edit “"|add:nofo_name_str|add:"”" as back_text %}
      {% url 'nofos:nofo_edit' nofo.id as back_href %}
      {% include "includes/page_heading.html" with title="Modification history for “"|add:nofo_name_str|add:"”" back_text=back_text back_href=back_href only %}
    {% endwith %}
  {% endwith %}

  {% if modification_date %}
    <p class="text-base margin-bottom-4">
      Showing all changes made <strong>after {{ modification_date|localtime|date:"F j, Y, g:i a" }}</strong>.
    </p>

    {% if modification_events %}
      <ul class="usa-list">
        {% for event in modification_events %}
          <li class="margin-bottom-2">
            <div>
              <strong>{{ event.event_type }}</strong> —
              {{ event.object_type }}: {{ event.object_description }}
            </div>
            <div class="text-base text-gray-700">
              {% timezone "America/New_York" %}
                <td>
                  {{ event.timestamp|date:'F j' }}, {{ event.timestamp|date:'g:i A' }}
                </td>
              {% endtimezone %}
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No changes found after the modification date.</p>
    {% endif %}

  {% else %}
    <div class="usa-alert usa-alert--info">
      <div class="usa-alert__body">
        <p class="usa-alert__text">
          This NOFO has no modification date set. No modification history available.
        </p>
      </div>
    </div>
  {% endif %}
{% endblock %}