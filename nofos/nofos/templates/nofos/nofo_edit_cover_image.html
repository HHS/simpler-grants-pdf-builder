{% extends 'base.html' %}
{% load static nofo_name %}

{% block title %}
Edit NOFO cover image for "{{ nofo|nofo_name }}"
{% endblock %}

{% block content %}

{% with nofo|nofo_name as nofo_name_str %}
{% with "Back to "|add:nofo_name_str|add:"" as back_text %}
{% url 'nofos:nofo_edit' nofo.id as back_href %}
{% include "includes/page_heading.html" with title="Edit NOFO cover image for "|add:nofo_name_str|add:"" back_text=back_text back_href=back_href only %}
{% endwith %}
{% endwith %}

<div class="">
  <div class="grid-row margin-top-3">
    <div class="grid-col-12 tablet:grid-col-8">
      {% if nofo_cover_image|slice:":4" == "img/" %}
      <img class="border-05 radius-md cover-image" alt="{{ nofo.cover_image_alt_text }}"
        title="{{nofo.cover_image_alt_text}}" src="{% static nofo_cover_image %}" />
      {% else %}
      <img class="border-05 radius-md cover-image" alt="{{ nofo.cover_image_alt_text }}"
        title="{{nofo.cover_image_alt_text}}" src="{{ nofo_cover_image }}" />
      {% endif %}
    </div>
  </div>

  <div class="grid-row grid-gap">
    <div class="grid-col-12 tablet:grid-col-auto margin-top-1">
      <a class="usa-button usa-button--icon usa-button--file-upload usa-button--cyan" type="button"
        href="{% url 'nofos:nofo_upload_cover_image' nofo.id %}">
        <span class="margin-left-2">Replace cover image</span>
      </a>
    </div>

    <div class="grid-col-12 tablet:grid-col-auto margin-top-1">
      <a class="usa-button usa-button--icon usa-button--delete usa-button--secondary" type="button" data-open-modal
        aria-controls="delete-cover-image-modal">
        <span class="margin-left-2">Remove cover image</span>
      </a>
    </div>

    <div class="grid-col-fill">
    </div>
  </div>

  <form id="nofo-cover-image--form" method="post">
    {% csrf_token %}
    <div class="grid-row">
      <div class="grid-col-12">
        {% with id="cover_image_alt_text" label="Enter a short description of the image for screen readers." hint="(Optional) This will be used as the alt text for the image. Good alt text concisely describes the image's content, providing context and meaning for users who can't see it." value=nofo.cover_image_alt_text %}
        {% include "includes/_text_input.html" with id=id label=label hint=hint value=value only %}
        {% endwith %}
      </div>
    </div>
    <div class="grid-row">
      <div class="grid-col-12 margin-top-2">
        <button class="usa-button usa-tooltip" type="submit" data-position="bottom"
          title="Save alternate cover image text">
          Save alternate text
        </button>
      </div>
    </div>
  </form>
</div>


<!-- Delete Cover Image Confirmation Modal -->
<div class="usa-modal" id="delete-cover-image-modal" aria-labelledby="delete-cover-image-modal-heading"
  aria-describedby="delete-cover-image-modal-description">
  <div class="usa-modal__content">
    <div class="usa-modal__main">
      <h2 class="usa-modal__heading" id="delete-cover-image-modal-heading">
        Remove cover image?
      </h2>
      <div class="usa-prose">
        <p id="delete-cover-image-modal-description">
          Are you sure you want to remove the cover image for this NOFO? This action cannot be undone.
        </p>
      </div>
      <div class="usa-modal__footer">
        <ul class="usa-button-group">
          <li class="usa-button-group__item">
            <form action="{% url 'nofos:nofo_delete_cover_image' nofo.id %}" method="post" style="display: inline;">
              {% csrf_token %}
              <button type="submit" class="usa-button usa-button--secondary">
                Yes, remove image
              </button>
            </form>
          </li>
          <li class="usa-button-group__item">
            <button type="button" class="usa-button usa-button--unstyled padding-105 text-center" data-close-modal>
              Cancel
            </button>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %}
